(this["webpackJsonpshop-app"]=this["webpackJsonpshop-app"]||[]).push([[0],{110:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n),r=a(16),o=a(240),l=a.n(o),m=a(149),s=a.n(m);t.a=function(t){var a=t.paymentPopup,n=t.setPaymentPopup,o=t.orderInfo,m=o.total,i=o.orderId;return c.a.createElement(r.a,{style:{backgroundColor:"rgba(255,255,255,0) !important"},show:a,onHide:function(){return n(!0)}},c.a.createElement("iframe",{style:{padding:"-15px",width:"100%",height:"550px"},id:"TrustPayFrame",src:function(){var t=m,a=i,n=function(t,a){var n=s()("A*",t),c=s()("A*",a),r=l.a.createHmac("sha256",n).update(c).digest();return e.from(r.buffer).reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),"").toUpperCase()}("5FIwY8FAc15vKHD96B9XQLhPIZdK8lNr","".concat(2107205663,"/").concat(t.toFixed(2),"/").concat("EUR","/").concat(a,"/").concat(0));return"".concat("https://playground.trustpay.eu/mapi5/wire/paypopup","?AccountId=").concat(2107205663,"&Amount=").concat(t,"&Currency=").concat("EUR","&Reference=").concat(a,"&PaymentType=").concat(0,"&Signature=").concat(n)}()}),c.a.createElement("div",{style:{position:"absolute",right:15,top:15,height:50,width:50,cursor:"pointer"},onClick:function(){return n(!1)}}))}}).call(this,a(32).Buffer)},246:function(e,t,a){e.exports=a(461)},274:function(e,t,a){},290:function(e,t){},292:function(e,t){},304:function(e,t){},306:function(e,t){},333:function(e,t){},335:function(e,t){},336:function(e,t){},341:function(e,t){},343:function(e,t){},362:function(e,t){},374:function(e,t){},377:function(e,t){},461:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(46),o=a.n(r),l=a(2),m=a(23),s=a(26),i=a(92),u=a(152),p=a(107),d=function(e){var t=e.isLoggedIn,a=e.handleLogOut;e.userName;return c.a.createElement(i.a,{fixed:"top",bg:"dark",variant:"dark",expand:"md"},c.a.createElement(i.a.Brand,null,c.a.createElement("img",{alt:"",src:"https://st2.depositphotos.com/8301258/11284/v/950/depositphotos_112842636-stock-illustration-logo-shop-bags-icon-symbol.jpg",width:"30",height:"30",className:"d-inline-block align-top"})),c.a.createElement(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(u.a,{className:"mr-auto"},c.a.createElement(m.b,{className:"nav-elem",to:"/"},"Domov"),c.a.createElement(m.b,{className:"nav-elem",to:"/vinarne"},"Vinarne"),c.a.createElement(m.b,{className:"nav-elem",to:"/vinka"},"Vinka"),c.a.createElement(m.b,{className:"nav-elem",to:"/akcie"},"Akcie"),c.a.createElement(m.b,{className:"nav-elem",to:"/sluzby"},"Sluzby")),c.a.createElement(u.a,{className:"mr-sm-2"},c.a.createElement(m.b,{className:"nav-elem",to:"/cart-page"},c.a.createElement(p.b,null)),t?c.a.createElement(c.a.Fragment,null,c.a.createElement(m.b,{className:"nav-elem",to:"/objednavky"},"Objednavky"),c.a.createElement(m.b,{className:"nav-elem",onClick:a,to:""},"Logout")):c.a.createElement(m.b,{className:"nav-elem",to:"/login-page"},"Login"))))},h=a(7),f=a.n(h),E=(a(274),a(275),a(43)),g=a(19),b=a(8),v=a(4),j=a(20),O=a(9),y=a(245),x=a(18),N=a(21),k=(a(35),a(28)),S=a(30),w=a.n(S),C=a(31),I=a(16),z=a(73),F=function(e){var t=e.showEditItems,a=e.setShowEditItems,r=e.shopId,o=e.itemId,m=e.itemDataProp,s=e.setShouldReload,i=e.shouldReload,u=Object(n.useState)(""),p=Object(l.a)(u,2),d=p[0],h=p[1],E=Object(n.useState)(""),j=Object(l.a)(E,2),y=j[0],x=j[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),F=S[0],D=S[1],P=Object(n.useState)(""),T=Object(l.a)(P,2),L=T[0],_=T[1],R=Object(n.useState)(!1),U=Object(l.a)(R,2),B=U[0],H=U[1],A=Object(n.useState)(""),M=Object(l.a)(A,2),Y=M[0],V=M[1],Z=Object(n.useState)(""),J=Object(l.a)(Z,2),$=J[0],W=J[1],X=Object(n.useState)(""),q=Object(l.a)(X,2),G=q[0],K=q[1],Q=Object(n.useState)(""),ee=Object(l.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(Object(g.a)({},m)),ce=Object(l.a)(ne,2),re=ce[0],oe=ce[1],le=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){((le(L)?le(L):L)||L||F||y||d||$||G||te)&&H(!0)}),[L,F,y,d,$,G,te]);return c.a.createElement(I.a,{show:t,onHide:function(){return _(""),h(""),x(""),D(""),H(!1),void a("")}},c.a.createElement(I.a.Header,{closeButton:!0},c.a.createElement(I.a.Title,null,"Add an item to your shop.")),c.a.createElement(I.a.Body,null,c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"shopName"},"Name your item:"),c.a.createElement("input",{value:d||re.itemName,className:"form-control",type:"text",name:"shopName",onChange:function(e){return h(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"price"},"Price:"),c.a.createElement("input",{value:y||re.price,className:"form-control",type:"text",name:"price",onChange:function(e){return x(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"color"},"Farba:"),c.a.createElement("input",{value:$||re.color,className:"form-control",type:"text",name:"color",placeholder:"povinne",onChange:function(e){return W(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"taste"},"Chut:"),c.a.createElement("input",{value:te||re.taste,className:"form-control",type:"text",name:"taste",onChange:function(e){return ae(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"type"},"Druh:"),c.a.createElement("input",{value:G||re.type,className:"form-control",type:"text",name:"type",onChange:function(e){return K(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,null,c.a.createElement("label",{htmlFor:"sizes"},"Maximalny pocet flias v jednej objednavke:"))),c.a.createElement(b.a,null,c.a.createElement(v.a,{className:"form-group"},c.a.createElement(z.a,null,c.a.createElement("input",{value:Y||re.maxCount||"",className:"form-control",type:"number",name:"sizes",onChange:function(e){return V(e.target.value)},placeholder:"Nechaj prazdne ak nieje hranica"})))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{maxLength:"230",value:F||re.description,className:"form-control",name:"description",type:"text",style:{resize:"none",minHeight:"100px"},onChange:function(e){return D(e.target.value)}}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},re.imageLink?c.a.createElement(b.a,{className:"justify-content-center text-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("img",{style:{height:"110px",width:"80px"},src:le(re.imageLink)?le(re.imageLink):re.imageLink}),c.a.createElement(O.a,{onClick:function(){return function(){var e=Object(g.a)(Object(g.a)({},re),{},{imageLink:""});oe(e)}()},variant:"dark",size:"sm"},"Vymazat obrazok"))):c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(r)}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(r),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&_("".concat(r,"-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Drop or click to choose image.",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}}))))),c.a.createElement(I.a.Footer,null,B?c.a.createElement(O.a,{variant:"dark",onClick:function(){d&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/itemName/").concat(d),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),y&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/price/").concat(y),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),F&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/description/").concat(F),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),L&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/imageLink/").concat(L),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),Y&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/maxCount/").concat(Y),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),$&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/color/").concat($),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),G&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/type/").concat(G),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)})),te&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(r,"/update-item/").concat(o,"/taste/").concat(te),{}).then((function(){a(""),s(!i)})).catch((function(e){return e&&console.log(e)}))}},"Save Item"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Save Item")))},D=function(e){var t=e.colMdSettings,a=e.colXsSettings,r=e.shopItems,o=e.shopId,s=e.userId,i=e.setShouldReload,u=e.shouldReload,p=e.setShowAddedPopup,d=e.isOwner,h=e.url,S=Object(n.useState)(""),w=Object(l.a)(S,2),C=w[0],I=w[1],z=Object(n.useState)(""),D=Object(l.a)(z,2),P=D[0],T=D[1],L=Object(n.useState)(""),_=Object(l.a)(L,2),R=_[0],U=_[1],B=Object(n.useState)(""),H=Object(l.a)(B,2),A=H[0],M=H[1],Y=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};return r.map((function(e){var n=e._id,r=e.itemName,l=e.price,S=e.description,w=e.imageLink,z=e.maxCount,D="home"===o?e.shopId:o,L=Y(w)?Y(w):w;return c.a.createElement(v.a,{className:"mt-2 mb-2",style:{color:"whitesmoke"},xs:null!==a&&void 0!==a?a:6,md:null!==t&&void 0!==t?t:6,lg:null!==t&&void 0!==t?t:4,xl:null!==t&&void 0!==t?t:3,key:n},c.a.createElement(j.a,{onMouseEnter:function(){return function(){var e={};e[n]="block",T(Object(g.a)(Object(g.a)({},P),e))}()},onMouseLeave:function(){T("")},style:{height:"410px"},id:n},d&&c.a.createElement(O.a,{onClick:function(e){return function(e){var t=e.currentTarget.parentNode.id;f.a.post("https://mas-vino.herokuapp.com/shop/".concat(o,"/delete-item/").concat(t),{}).then((function(){return i(!u)})).catch((function(e){return e&&console.log("Error ".concat(e))}))}(e)},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+5"},variant:"outline-danger"},c.a.createElement(k.b,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),d&&c.a.createElement(O.a,{onClick:function(e){return function(e){var t={};t[e.currentTarget.parentNode.id]=!0,M(Object(g.a)(Object(g.a)({},A),t))}(e)},style:{width:"40px",height:"40px",marginBottom:"-40px",marginLeft:"40px",zIndex:"+5"},variant:"outline-warning"},c.a.createElement(k.c,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),A[n]&&c.a.createElement(F,{shouldReload:u,setShouldReload:i,itemDataProp:e,showEditItems:A[n],setShowEditItems:M,shopId:D,itemId:n}),c.a.createElement(j.a.Img,{className:"shop-item-img mt-4",variant:"top",src:L}),c.a.createElement(j.a.Body,{style:{color:"Black"}},c.a.createElement(j.a.Title,null,r),c.a.createElement(j.a.Text,null,l," \u20ac")),c.a.createElement(j.a.ImgOverlay,{style:{background:"rgba(52,58,64,0.7)",display:"".concat("block"===P[n]?"block":"none")}},c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement(O.a,{style:{width:"100%"},onClick:function(e){return function(e){var t=e.currentTarget.parentNode.parentNode.parentNode.id,a=C[n]||1;if(s)f.a.post("https://mas-vino.herokuapp.com/users/".concat(s,"/cart/add-cart-item/").concat(D,"/").concat(t),{shopId:D,itemId:t,count:a}).then((function(){return p(!0)})).catch((function(e){return e&&console.log(e)})).then((function(){return setTimeout((function(){return p(!1)}),5e3)}));else{var c=localStorage.getItem("shoppingCart");localStorage.removeItem("shoppingCart");var r=c?[].concat(Object(E.a)(JSON.parse(c)),[{shopId:D,itemId:t,count:a}]):[{shopId:D,itemId:t,count:a}];localStorage.setItem("shoppingCart",JSON.stringify(r)),p(!0),setTimeout((function(){return p(!1)}),5e3)}}(e)},variant:"dark"},"Add to shopping cart."),c.a.createElement(x.a,null,c.a.createElement(b.a,{className:"mt-2"},c.a.createElement(v.a,null,c.a.createElement(y.a.Control,{as:"select",value:C[n],onChange:function(e){return function(e){var t={};t[n]=e.target.value,I(Object(g.a)(Object(g.a)({},C),t))}(e)}},function(){for(var e=[],t=1;t<=(null!==z&&void 0!==z?z:200);t++)e.push(c.a.createElement("option",{key:t,value:t},t));return e}()))),d&&c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement("a",{onClick:function(){return function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t),U("#333333"),setTimeout((function(){return U("")}),150)}(n)},style:{textDecoration:"none",cursor:"pointer",color:R}},c.a.createElement("strong",null,"copy my id!")))),c.a.createElement(b.a,{style:{height:"240px",marginTop:"5px",marginBottom:"5px"}},c.a.createElement(v.a,null,S)),h&&c.a.createElement(m.b,{to:"/".concat(h)},c.a.createElement(O.a,{style:{width:"100%"},variant:"dark"},"Visit shop.")))))))}))},P=a(74),T=a(112),L=a(41),_=function(e){var t=e.eventsPopup,a=e.setEventsPopup,r=e.forceRefresh,o=e.setForceRefresh,m=e.eventsImage,s=e.eventsText,i=Object(n.useState)(s),u=Object(l.a)(i,2),p=u[0],d=u[1],h=Object(n.useState)(m),E=Object(l.a)(h,2),g=E[0],j=E[1],y=function(e){try{return console.log(e),"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:p,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"400px"},onChange:function(e){return d(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},g?c.a.createElement(b.a,{className:"justify-content-center text-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("img",{style:{height:"110px",width:"160px"},src:y(g)?y(g):g}),c.a.createElement(O.a,{onClick:function(){return j("")},variant:"dark",size:"sm"},"Vymazat obrazok"))):c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat("homescreen-event-image")}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat("homescreen-event-image"),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&j("".concat("homescreen-event-image","-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Pridat obrazok udalosti. ",c.a.createElement("br",null)," (povinne)",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))),c.a.createElement("br",null),p&&g?c.a.createElement(O.a,{variant:"dark",onClick:function(){f.a.put("https://mas-vino.herokuapp.com/home/events-description",{descriptionEvents:p,imageLinkEvents:g}).then((function(e){console.log(e.data),o(!r),a("")})).catch((function(e){return e&&e.data}))}},"Upravit"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Upravit"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))},R=function(e){var t=e.servicesPopup,a=e.setServicesPopup,r=e.forceRefresh,o=e.setForceRefresh,m=e.servicesImage,s=e.servicesText,i=Object(n.useState)(s),u=Object(l.a)(i,2),p=u[0],d=u[1],h=Object(n.useState)(m),E=Object(l.a)(h,2),g=E[0],j=E[1],y=function(e){try{return console.log(e),"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:p,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"400px"},onChange:function(e){return d(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},g?c.a.createElement(b.a,{className:"justify-content-center text-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("img",{style:{height:"110px",width:"160px"},src:y(g)?y(g):g}),c.a.createElement(O.a,{onClick:function(){return j("")},variant:"dark",size:"sm"},"Vymazat obrazok"))):c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat("homescreen-service-image")}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat("homescreen-service-image"),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&j("".concat("homescreen-service-image","-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Pridat obrazok udalosti. ",c.a.createElement("br",null)," (povinne)",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))),c.a.createElement("br",null),p&&g?c.a.createElement(O.a,{variant:"dark",onClick:function(){f.a.put("https://mas-vino.herokuapp.com/home/services-description",{descriptionServices:p,imageLinkServices:g}).then((function(e){console.log(e.data),o(!r),a("")})).catch((function(e){return e&&e.data}))}},"Upravit"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Upravit"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))},U=function(e){var t=e.descriptionsPopup,a=e.setDescriptionsPopup,r=e.forceRefresh,o=e.setForceRefresh,m=e.descriptionsText,s=Object(n.useState)(m),i=Object(l.a)(s,2),u=i[0],p=i[1];return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:u,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"400px"},onChange:function(e){return p(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),u?c.a.createElement(O.a,{variant:"dark",onClick:function(){f.a.put("https://mas-vino.herokuapp.com/home/general-description",{descriptionGeneral:u}).then((function(e){console.log(e.data),o(!r),a("")})).catch((function(e){return e&&e.data}))}},"Upravit"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Upravit"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))},B=320,H=a(237),A=a(146),M=B,Y=function(e){var t=e.userId,a=e.isOwner,r=Object(n.useState)(""),o=Object(l.a)(r,2),s=o[0],i=o[1],u=Object(n.useState)([]),p=Object(l.a)(u,2),d=p[0],h=p[1],j=Object(n.useState)(!1),y=Object(l.a)(j,2),N=y[0],S=y[1],w=Object(n.useState)(!1),C=Object(l.a)(w,2),I=C[0],z=C[1],F=Object(n.useState)([]),B=Object(l.a)(F,2),Y=B[0],V=B[1],Z=Object(n.useState)(["","","",""]),J=Object(l.a)(Z,2),$=J[0],W=J[1],X=Object(n.useState)([]),q=Object(l.a)(X,2),G=q[0],K=q[1],Q=Object(n.useState)([]),ee=Object(l.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),ce=Object(l.a)(ne,2),re=ce[0],oe=ce[1],le=Object(n.useState)(""),me=Object(l.a)(le,2),se=me[0],ie=me[1],ue=Object(n.useState)(!1),pe=Object(l.a)(ue,2),de=pe[0],he=pe[1],fe=Object(n.useState)(!1),Ee=Object(l.a)(fe,2),ge=Ee[0],be=Ee[1],ve=Object(n.useState)(!1),je=Object(l.a)(ve,2),Oe=je[0],ye=je[1],xe=Object(n.useState)(!1),Ne=Object(l.a)(xe,2),ke=Ne[0],Se=Ne[1];Object(n.useEffect)((function(){S(!0),f.a.get("https://mas-vino.herokuapp.com/home/").then((function(e){var t=e.data.featuredWines,a=[e.data.descriptionEvents,e.data.imageLinkEvents],n=[e.data.descriptionServices,e.data.imageLinkServices],c=e.data.descriptionGeneral;ae(a),oe(n),ie(c),V(t),K(t),h([]),t.map((function(e){f.a.get("https://mas-vino.herokuapp.com/shop/find-item-by-id/".concat(e)).then((function(e){var t=e.data,a=Object(g.a)(Object(g.a)({},t[0]),{},{shopId:t[1]});return h((function(e){return[].concat(Object(E.a)(e),[a])}))})).catch((function(e){return e&&console.log("Error while setting full featured wines, ",e)}))}))})).catch((function(e){return e&&console.log("Error while fetching featured wines, ",e)})),f.a.get("https://mas-vino.herokuapp.com/shop/").then((function(e){return i(e.data)})).catch((function(e){return e&&console.log("Error while fetching shops for carousel, ",e)})).then((function(){return S(!1)}))}),[ke]);var we=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}},Ce=function(){return c.a.createElement(b.a,{className:"mt-4 mb-4"},c.a.createElement(v.a,{className:"mt-4 mb-4"},te[0]," ",c.a.createElement("br",null),c.a.createElement(m.b,{to:"/akcie"},c.a.createElement(O.a,{variant:"dark"},"Zoznam akcii"))),c.a.createElement(v.a,{className:"mt-4 mb-4"},a&&c.a.createElement(O.a,{onClick:function(){return he(!0)},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+1",position:"absolute"},variant:"outline-warning"},c.a.createElement(k.c,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),c.a.createElement("img",{className:"w-100",src:we(te[1])?we(te[1]):te[1]})))},Ie=function(){return c.a.createElement(b.a,{className:"mt-4 mb-4 pt-4 pb-4"},c.a.createElement(v.a,{className:"mt-4 mb-4"},a&&c.a.createElement(O.a,{onClick:function(){return be(!0)},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+1",position:"absolute"},variant:"outline-warning"},c.a.createElement(k.c,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),c.a.createElement("img",{className:"w-100",src:we(re[1])?we(re[1]):re[1]})),c.a.createElement(v.a,{className:"mt-4 mb-4"},re[0]," ",c.a.createElement("br",null),c.a.createElement(m.b,{to:"/sluzby"},c.a.createElement(O.a,{variant:"dark"},"Zoznam sluzieb"))))},ze=function(){return c.a.createElement(b.a,{className:"text-center mt-4 mb-4"},c.a.createElement(v.a,{className:"mt-4 mb-4"},a&&c.a.createElement(O.a,{onClick:function(){return ye(!0)},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+1",position:"absolute"},variant:"outline-warning"},c.a.createElement(k.c,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),se))},Fe=function(e,t){var a=G[t],n=Object(E.a)($);f.a.get("https://mas-vino.herokuapp.com/shop/find-item-by-id/".concat(a)).then((function(e){e.data[0]?(n[t]="",W(n),function(){for(var e=0;e<Y.length;e++)if(Y[e]!==G[e]){V(G),f.a.post("https://mas-vino.herokuapp.com/home/featured-wines",{featuredWines:G}).then((function(e){return window.location.reload()})).catch((function(e){return e&&console.log(e)}));break}}()):(n[t]="invalid-input",W(n))})).catch((function(e){return console.log(e)}))},De=function(){return G.map((function(e,t){return c.a.createElement(v.a,{key:"featuerd-".concat(t),sm:6,md:3,className:"text-center mt-1"},c.a.createElement("input",{className:"form-control text-center ".concat($[t]),type:"text",name:"featured-".concat(t),value:e,onChange:function(e){return function(e,t){var a=e.target.value,n=Object(E.a)(G);n[t]=a,K(n)}(e,t)},onBlur:function(e){return Fe(0,t)}}))}))};return N?c.a.createElement(L.a,{style:{marginLeft:"49%",marginTop:"20%"},animation:"border"}):c.a.createElement(c.a.Fragment,null,I&&c.a.createElement(P.a,{style:{position:"fixed",zIndex:"9",top:56,right:0},variant:"success",onClose:function(){return z(!1)},dismissible:!0},c.a.createElement("p",null,"Item added to cart!")),de&&c.a.createElement(_,{eventsText:te[0],eventsImage:te[1],eventsPopup:de,setEventsPopup:he,forceRefresh:ke,setForceRefresh:Se}),ge&&c.a.createElement(R,{servicesText:re[0],servicesImage:re[1],servicesPopup:ge,setServicesPopup:be,forceRefresh:ke,setForceRefresh:Se}),Oe&&c.a.createElement(U,{descriptionsText:se,descriptionsPopup:Oe,setDescriptionsPopup:ye,forceRefresh:ke,setForceRefresh:Se}),c.a.createElement(T.a,{indicators:!1,style:{maxHeight:M}},s&&s.map((function(e){var t=e.shopName,a=e.owner,n=e.url,r=e.imageLink,o=we(r)?we(r):r;return c.a.createElement(T.a.Item,{key:"id-".concat(o),style:{maxHeight:M}},c.a.createElement(m.b,{to:"/".concat(n)},c.a.createElement("img",{className:"d-block w-100",src:o,alt:"Carousel-".concat(r)}),c.a.createElement(T.a.Caption,null,c.a.createElement("h3",null,t),c.a.createElement("p",null,a))))}))),c.a.createElement("div",null,c.a.createElement(x.a,null,c.a.createElement(ze,null))),c.a.createElement("div",{style:{background:"rgba(52,58,64, 0.2)"}},c.a.createElement(x.a,{className:"pt-3 pb-3"},a&&c.a.createElement(b.a,null,c.a.createElement(De,null)),c.a.createElement(b.a,{className:"text-center pt-4 pb-4"},c.a.createElement(D,{colXsSettings:6,colMdSettings:3,shopItems:d,shopId:"home",userId:t,setShouldReload:!1,shouldReload:!1,setShowAddedPopup:z,isOwner:!1})))),c.a.createElement("div",null,c.a.createElement(x.a,null,c.a.createElement(Ce,null))),c.a.createElement("div",{style:{background:"rgba(52,58,64, 0.2)"}},c.a.createElement(x.a,null,c.a.createElement(Ie,null))),c.a.createElement("div",null,c.a.createElement(x.a,null,c.a.createElement(b.a,{className:"text-center pt-4 pb-4 mb-4"},c.a.createElement(v.a,null,c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/mattiass771",style:{textDecoration:"none",color:"#333333"}},c.a.createElement(H.a,{style:{fontSize:"150%",marginTop:"-2px"}})," by ",c.a.createElement("strong",null,"MZ"))),c.a.createElement(v.a,null,c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://facebook.com",style:{textDecoration:"none",color:"#333333"}},c.a.createElement(A.a,{style:{fontSize:"130%",marginTop:"-2px",marginRight:"-4px"}}),"acebook.com",c.a.createElement("strong",null,"/masvino"))),c.a.createElement(v.a,null,c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://instagram.com",style:{textDecoration:"none",color:"#333333"}},c.a.createElement(A.b,{style:{fontSize:"150%",marginTop:"-2px"}}),c.a.createElement("strong",null,"#masvino"))),c.a.createElement(v.a,null,c.a.createElement(k.e,{style:{fontSize:"150%",marginTop:"-2px"}}),c.a.createElement("strong",{style:{color:"#333333"}},"masvino@mail.com"))))))},V=a(147),Z=a.n(V),J=function(e){var t=e.userData,a=Object(n.useState)(""),r=Object(l.a)(a,2),o=r[0],m=r[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),u=i[0],p=i[1],d=t.fullName,h=t._id;return c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement(x.a,null,c.a.createElement("br",null),c.a.createElement(b.a,null,c.a.createElement(v.a,{className:"text-center"},c.a.createElement("h1",null,"Create new shop!"),c.a.createElement("p",null,"Please fill out the form below and shortly after, your very own shop will be generated."))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"form-group"},c.a.createElement("label",{htmlFor:"shopName"},"Name your shop:"),c.a.createElement("input",{value:o,className:"form-control",type:"text",name:"shopName",onChange:function(e){return m(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"form-group"},c.a.createElement("label",{htmlFor:"setDescription"},"Add a brief description to your shop:"),c.a.createElement("textarea",{value:u,className:"form-control",type:"text",name:"setDescription",onChange:function(e){return p(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center"},c.a.createElement(O.a,{variant:"dark",onClick:function(){console.log(d,o,h,u,Z.a.generate()),f.a.post("https://mas-vino.herokuapp.com/shop/add",{shopName:o,owner:d,ownerId:h,description:u,url:Z.a.generate()}).then((function(e){return console.log(e.data)})).catch((function(e){return e&&console.log("Error catched: ".concat(e))})).then((function(){return window.location.reload()}))}},"Open Shop!")))),c.a.createElement("hr",null))},$=function(e){var t=e.userData,a=e.shopData,r=Object(n.useState)(!1),o=Object(l.a)(r,2),s=o[0],i=o[1],u=Object(n.useState)(""),p=Object(l.a)(u,2),d=p[0],h=p[1],f=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};return c.a.createElement(x.a,null,c.a.createElement(b.a,null,t.isOwner&&c.a.createElement(v.a,{className:"text-center"},s?c.a.createElement(J,{userData:t}):c.a.createElement(O.a,{style:{marginTop:"20px"},variant:"dark",onClick:function(){return i(!0)}},"New Shop"))),c.a.createElement(b.a,{className:"mt-4"},a.map((function(e){var t=e._id,a=e.shopName,n=e.description,r=e.url,o=e.overviewImage;return c.a.createElement(v.a,{className:"mt-2 mb-2",md:4,key:t},c.a.createElement(m.b,{to:"/".concat(r)},c.a.createElement(j.a,{className:"h-100",onMouseEnter:function(){return function(){var e={};e[t]="none",h(Object(g.a)(Object(g.a)({},d),e))}()},onMouseLeave:function(){return function(){var e={};e[t]="block",h(Object(g.a)(Object(g.a)({},d),e))}()},style:{textAlign:"center",color:"whitesmoke"},id:t},c.a.createElement(j.a.Img,{className:"h-100",src:f(o)?f(o):"https://miro.medium.com/max/295/1*i5iqn7xB-l0kLwsJJBYEWQ.jpeg"}),c.a.createElement(j.a.ImgOverlay,{className:"".concat("none"===d[t]?"fade-out":"fade-in"),style:{background:"rgba(52,58,64,0.4)"}},c.a.createElement(j.a.Title,null,a),c.a.createElement(j.a.Text,null,n)))))}))))},W=function(e){var t=e.userData,a=Object(n.useState)({}),r=Object(l.a)(a,2),o=r[0],m=r[1],s=Object(n.useState)(!0),i=Object(l.a)(s,2),u=i[0],p=i[1];return Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/shop/").then((function(e){return m(e.data?e.data:{})})).catch((function(e){if(e)return console.log("Fetch error: ".concat(e))})).then((function(){return p(!1)}))}),[]),c.a.createElement(c.a.Fragment,null,u?c.a.createElement(L.a,{style:{marginLeft:"49%",marginTop:"20%"},animation:"border"}):c.a.createElement($,{userData:t,shopData:o}))},X=function(e){var t=e.shoppingCart,a=void 0!==t&&t,r=e.handleLogin,o=Object(n.useState)(""),m=Object(l.a)(o,2),s=m[0],i=m[1],u=Object(n.useState)(""),p=Object(l.a)(u,2),d=p[0],h=p[1],E=Object(n.useState)(""),g=Object(l.a)(E,2),j=g[0],y=g[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),w=S[0],C=S[1],I=Object(n.useState)(""),z=Object(l.a)(I,2),F=z[0],D=z[1],P=Object(n.useState)(""),T=Object(l.a)(P,2),L=T[0],_=T[1],R=Object(n.useState)(!1),U=Object(l.a)(R,2),B=U[0],H=U[1],A=Object(n.useState)(null),M=Object(l.a)(A,2),Y=M[0],V=M[1],Z=Object(n.useState)(""),J=Object(l.a)(Z,2),$=J[0],W=J[1],X=Object(n.useState)(""),q=Object(l.a)(X,2),G=q[0],K=q[1],Q=Object(n.useState)(""),ee=Object(l.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(l.a)(ne,2),re=ce[0],oe=ce[1],le=function(){return!!(-1!==F.search(/[0-9]/)&&-1!==F.search(/[a-z]/)&&-1!==F.search(/[A-Z]/)&&F&&F.length>7)},me=function(){return w&&null===Y&&w.match(/[a-z]+[.]?[a-z]*[@][a-z]+[.][a-z]{1,5}/gi)?"":w&&w.length>0?"invalid-input":void 0},se=function(e){return e&&e.match(/^[a-z]+$/i)?"":e&&e.length>0?"invalid-input":void 0},ie=function(){return re&&re.match(/^[a-z]+$/i)?"":re&&re.length>0?"invalid-input":void 0},ue=function(){return G&&G.match(/^[a-z ]+[0-9 ]+[/]{0,1}[a-z0-9 ]*$/i)?"":G&&G.length>0?"invalid-input":void 0},pe=function(){return $&&$.match(/^[+]?[0-9]{6,14}[0-9]$/)?"":$&&$.length>0?"invalid-input":void 0},de=function(){return te&&te.match(/^[0-9]{5}$/)?"":te&&te.length>0?"invalid-input":void 0};return Object(n.useEffect)((function(){H(!(!F||!L||F!==L))}),[L]),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement(x.a,null,c.a.createElement("br",null),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("h2",null,"Sign up!"))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"firstName"},"First Name:"),c.a.createElement("input",{className:"form-control text-center ".concat(se(s)),type:"text",name:"firstName",value:s,onChange:function(e){return i(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"middleName"},"Middle Name (Optional):"),c.a.createElement("input",{className:"form-control text-center ".concat(se(d)),type:"text",name:"middleName",value:d,onChange:function(e){return h(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"lastName"},"Last Name:"),c.a.createElement("input",{className:"form-control text-center ".concat(se(j)),type:"text",name:"lastName",value:j,onChange:function(e){return y(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"email"},"E-mail:"),c.a.createElement("input",{className:"form-control text-center ".concat(me()),type:"text",name:"email",value:w,onChange:function(e){return C(e.target.value)},onBlur:function(){f.a.get("https://mas-vino.herokuapp.com/users/email/".concat(w)).then((function(e){return V(e.data)})).catch((function(e){return e&&console.log("Error: ".concat(e))}))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"phone"},"Phone:"),c.a.createElement("input",{className:"form-control text-center ".concat(pe()),type:"text",name:"phone",value:$,onChange:function(e){return W(e.target.value&&e.target.value.substring(0,16))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"street"},"Street and house no.:"),c.a.createElement("input",{className:"form-control text-center ".concat(ue()),type:"text",name:"street",value:G,onChange:function(e){return K(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"postal"},"Postal:"),c.a.createElement("input",{className:"form-control text-center ".concat(de()),type:"text",name:"postal",value:te,onChange:function(e){return ae(e.target.value&&e.target.value.substring(0,5))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"city"},"City:"),c.a.createElement("input",{className:"form-control text-center ".concat(ie()),type:"text",name:"city",value:re,onChange:function(e){return oe(e.target.value)}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"passwordFirst"},"New Password:"),c.a.createElement("input",{className:"form-control text-center ".concat(!le()&&F.length>0?"invalid-input":""),type:"password",name:"passwordFirst",value:F,onChange:function(e){return D(e.target.value)}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"passwordSecond"},"Repeat Password:"),c.a.createElement("input",{className:"form-control text-center",type:"password",name:"passwordSecond",value:L,onChange:function(e){return _(e.target.value)}}))),le()?null:c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-3"},c.a.createElement("em",{style:{color:"#7b1818"}},"Password must be at least 8 characters long and must contain one lowercase, one uppercase character and one number."))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-3"},Y&&c.a.createElement(c.a.Fragment,null,c.a.createElement("em",{style:{color:"#7b1818"}},"This e-mail is already registered in our system!"),c.a.createElement("br",null),c.a.createElement("br",null)),le()&&!B&&c.a.createElement(c.a.Fragment,null,c.a.createElement("em",{style:{color:"#7b1818"}},"Passwords must match!")))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-3"},""===me()&&""===se(s)&&""===se(j)&&le()&&""===pe()&&""===ue()&&""===de()&&""===ie()&&B&&null===Y?c.a.createElement(O.a,{onClick:function(){var e=d?s+" "+d+" "+j:s+" "+j,t="".concat(G,",").concat(te.toString(),",").concat(re);console.log(typeof $,$,typeof t,t),f.a.post("https://mas-vino.herokuapp.com/users/add-user",{userName:w,password:L,fullName:e,email:w,phone:$,address:t}).then((function(e){return console.log(e.data)})).catch((function(e){return e&&console.log("Error: ".concat(e))})).then((function(){return a?r():window.location.reload()}))},variant:"dark"},"Sign up!"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Sign up!")))))},q=function(e){var t=e.shoppingCart,a=void 0!==t&&t,r=Object(n.useState)("display-none"),o=Object(l.a)(r,2),m=o[0],s=o[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),p=u[0],d=u[1];return c.a.createElement(x.a,null,c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement("br",null),c.a.createElement(b.a,null,c.a.createElement(v.a,{className:"text-center"},c.a.createElement("h2",null,"Sign in!"))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("form",{action:a?"https://mas-vino.herokuapp.com/login?shopping=cart":"https://mas-vino.herokuapp.com/login",method:"post"},c.a.createElement("input",{className:"form-control text-center",type:"text",placeholder:"username",name:"username"}),c.a.createElement("br",null),c.a.createElement("input",{className:"form-control text-center",type:"password",placeholder:"password",name:"password"}),c.a.createElement("br",null),c.a.createElement("input",{className:"btn btn-dark",id:"sub",type:"submit",value:"Sign in!"})))),c.a.createElement("hr",null),!a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"".concat(p)},c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement(O.a,{onClick:function(){s(""),d("display-none")},variant:"dark"},"Hey, I am new here!")))),c.a.createElement("div",{className:"".concat(m)},c.a.createElement(X,null)))))},G=function(e){var t=e.showAddItems,a=e.setShowAddItems,r=e.shopData,o=Object(n.useState)(""),m=Object(l.a)(o,2),s=m[0],i=m[1],u=Object(n.useState)(""),p=Object(l.a)(u,2),d=p[0],h=p[1],E=Object(n.useState)(""),g=Object(l.a)(E,2),j=g[0],y=g[1],x=Object(n.useState)(""),k=Object(l.a)(x,2),S=k[0],F=k[1],D=Object(n.useState)(!1),P=Object(l.a)(D,2),T=P[0],L=P[1],_=Object(n.useState)(""),R=Object(l.a)(_,2),U=R[0],B=R[1],H=Object(n.useState)(""),A=Object(l.a)(H,2),M=A[0],Y=A[1],V=Object(n.useState)(""),Z=Object(l.a)(V,2),J=Z[0],$=Z[1],W=Object(n.useState)(""),X=Object(l.a)(W,2),q=X[0],G=X[1],K=r._id,Q=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){(Q(S)?Q(S):S)&&S&&j&&d&&s&&M&&L(!0)}),[S,j,d,s,M]);return c.a.createElement(I.a,{show:t,onHide:function(){return F(""),i(""),h(""),y(""),L(!1),void a(!1)}},c.a.createElement(I.a.Header,{closeButton:!0},c.a.createElement(I.a.Title,null,"Add an item to your shop.")),c.a.createElement(I.a.Body,null,c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"shopName"},"Name your item:"),c.a.createElement("input",{value:s,className:"form-control",type:"text",name:"shopName",onChange:function(e){return i(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"price"},"Price:"),c.a.createElement("input",{value:d,className:"form-control",type:"text",name:"price",onChange:function(e){return h(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"color"},"Farba:"),c.a.createElement("input",{value:M,className:"form-control",type:"text",name:"color",placeholder:"povinne",onChange:function(e){return Y(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"taste"},"Chut:"),c.a.createElement("input",{value:q,className:"form-control",type:"text",name:"taste",onChange:function(e){return G(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"type"},"Druh:"),c.a.createElement("input",{value:J,className:"form-control",type:"text",name:"type",onChange:function(e){return $(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,null,c.a.createElement("label",{htmlFor:"sizes"},"Maximalny pocet flias v jednej objednavke:"))),c.a.createElement(b.a,null,c.a.createElement(v.a,{className:"form-group"},c.a.createElement(z.a,null,c.a.createElement("input",{value:U,className:"form-control",type:"number",name:"sizes",onChange:function(e){return B(e.target.value)},placeholder:"Nechaj prazdne ak nieje hranica"})))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{maxLength:"230",value:j,className:"form-control",name:"description",type:"text",style:{resize:"none",minHeight:"100px"},onChange:function(e){return y(e.target.value)}}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(K)}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(K),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&F("".concat(K,"-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Drop or click to choose image.",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}}))))),c.a.createElement(I.a.Footer,null,T?c.a.createElement(O.a,{variant:"dark",onClick:function(){S&&j&&d&&s&&M&&f.a.post("https://mas-vino.herokuapp.com/shop/".concat(K,"/add-item"),{itemName:s,price:d,description:j,imageLink:S,maxCount:U,color:M,type:J,taste:q}).then((function(){return a(!1)})).catch((function(e){return e&&console.log(e)}))}},"Save Item"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Save Item")))},K=function(e){var t=e.shopData,a=e.isOwner,r=e.userId,o=Object(n.useState)(!1),m=Object(l.a)(o,2),s=m[0],i=m[1],u=Object(n.useState)(t.shopItems),d=Object(l.a)(u,2),h=d[0],E=d[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),N=y[0],k=y[1],S=Object(n.useState)(!1),w=Object(l.a)(S,2),C=w[0],I=w[1],z=t._id;return Object(n.useEffect)((function(){s||k(!N)}),[s]),Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/shop/".concat(z)).then((function(e){return E(e.data.shopItems)})).catch((function(e){return e&&console.log(e.data)})).then((function(){}))}),[N]),c.a.createElement(x.a,{className:"text-center"},C&&c.a.createElement(P.a,{style:{position:"fixed",top:56,right:0},variant:"success",onClose:function(){return I(!1)},dismissible:!0},c.a.createElement("p",null,"Item added to cart!")),a&&c.a.createElement(G,{shopData:t,showAddItems:s,setShowAddItems:i}),c.a.createElement(b.a,null,c.a.createElement(D,{shopItems:h,userId:r,shopId:z,setShouldReload:k,shouldReload:N,setShowAddedPopup:I,isOwner:a}),a&&c.a.createElement(v.a,{className:"mt-2 mb-2",md:6,lg:4,xl:3},c.a.createElement(j.a,{style:{height:"400px"}},c.a.createElement(O.a,{variant:"outline-dark",style:{border:"0px",height:"100%"},onClick:function(){return i(!0)}},c.a.createElement(p.a,{style:{margin:"0 auto",fontSize:"400%"}}))))))},Q=a(238),ee=function(e){var t=e.shopData,a=e.isOwner,r=Object(s.f)(),o=t.url,m=Object(n.useState)(o),i=Object(l.a)(m,2),u=i[0],p=i[1],d=Object(n.useState)(o),h=Object(l.a)(d,2),E=h[0],g=h[1],j=Object(n.useState)(!0),y=Object(l.a)(j,2),S=y[0],I=y[1],F=Object(n.useState)(!1),D=Object(l.a)(F,2),T=D[0],L=D[1],_=Object(n.useState)(t.shopName),R=Object(l.a)(_,2),U=R[0],B=R[1],H=Object(n.useState)(""),A=Object(l.a)(H,2),M=A[0],Y=A[1],V=Object(n.useState)(t.description),Z=Object(l.a)(V,2),J=Z[0],$=Z[1],W=Object(n.useState)(t.owner),X=Object(l.a)(W,2),q=X[0],G=X[1],K=Object(n.useState)(""),ee=Object(l.a)(K,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),ce=Object(l.a)(ne,2),re=ce[0],oe=ce[1],le=Object(n.useState)(t.imageLink?t.imageLink:""),me=Object(l.a)(le,2),se=me[0],ie=(me[1],Object(n.useState)(!1)),ue=Object(l.a)(ie,2),pe=ue[0],de=ue[1],he=Object(n.useState)(!1),fe=Object(l.a)(he,2),Ee=fe[0],ge=fe[1],be=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){te&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(t._id,"/update-shop/imageLink/").concat(te)).then((function(e){})).catch((function(e){return e&&ve(e)}))}),[te]),Object(n.useEffect)((function(){re&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(t._id,"/update-shop/overviewImage/").concat(re)).then((function(e){})).catch((function(e){return e&&ve(e)}))}),[re]),Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/shop/link/".concat(u)).then((function(e){e.data&&u!==E?I(!1):I(!0)})).catch((function(e){return e&&console.log(e)}))}),[u]);var ve=function(e){return console.log("Error connecting to the database: ",e),Y("Chyba pri aktualizacii dat, data neboli upravene v databaze."),setTimeout((function(){return Y("")}),5e3)};return c.a.createElement(Q.a,{style:{background:"url(".concat(be(se)?be(se):"",") no-repeat"),backgroundSize:"cover"},fluid:!0},c.a.createElement(x.a,{className:"text-center"},T?c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(O.a,{onClick:function(e){f.a.delete("https://mas-vino.herokuapp.com/shop/".concat(t._id)).then((function(){return r.push("/vinarne")})).catch((function(e){return e&&console.log("Error ".concat(e))}))},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+5"},variant:"outline-danger"},c.a.createElement(k.b,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),c.a.createElement(v.a,{xs:8},c.a.createElement("input",{className:"form-control text-center",value:U,onChange:function(e){return B(e.target.value)},onBlur:function(){U&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(t._id,"/update-shop/shopName/").concat(U)).then((function(e){})).catch((function(e){return e&&ve(e)}))},name:"shopName",placeholder:"Nazov"}),c.a.createElement("textarea",{style:{minHeight:"100px"},className:"form-control text-center",value:J,onChange:function(e){return $(e.target.value)},onBlur:function(){J&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(t._id,"/update-shop/description/").concat(J)).then((function(e){})).catch((function(e){return e&&ve(e)}))},name:"description",placeholder:"Popis"}),c.a.createElement("input",{className:"form-control text-center",value:q,onChange:function(e){return G(e.target.value)},onBlur:function(){q&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(t._id,"/update-shop/owner/").concat(q)).then((function(e){})).catch((function(e){return e&&ve(e)}))},name:"owner",placeholder:"Majitel"}),c.a.createElement("div",null,c.a.createElement(z.a,null,c.a.createElement("p",{style:{marginRight:10,marginTop:5}},"www.vimko.sk/"),c.a.createElement("input",{className:S?"form-control text-center":"text-center form-control invalid-input",value:u,onChange:function(e){return p(e.target.value)},name:"currentUrl",onBlur:function(){S&&f.a.put("https://mas-vino.herokuapp.com/shop/".concat(t._id,"/update-shop/url/").concat(u)).then((function(e){return g(u)})).catch((function(e){return e&&ve(e)})).then((function(){return r.push("/".concat(u))}))}})),!S&&c.a.createElement("p",{style:{color:"red"}},"Adresa uz existuje, vyberte prosim inu.")))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{className:"text-center"},c.a.createElement(O.a,{variant:"dark",onClick:function(){return ge(!1),void de(!0)}},"Upload title image"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return de(!1),void ge(!0)}},"Upload overview image")))):c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement("h2",null,U),c.a.createElement("p",null,J),c.a.createElement("p",null,q),c.a.createElement("p",null,c.a.createElement("a",{className:"link-no-deco",href:"https://mas-vino.herokuapp.com/".concat(u)},"https://mas-vino.herokuapp.com/",u)))),(pe||Ee)&&T?c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(t._id)}},onChangeStatus:function(e,a){var n=e.meta;e.file;"removed"===a&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(t._id),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(n),"done"===a&&(pe?ae("".concat(t._id,"-").concat(n.name.replace(/_/g,"-"))):Ee&&oe("".concat(t._id,"-").concat(n.name.replace(/_/g,"-"))))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Drop or click to choose ",pe?"title":"overview"," image.",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))):null,a&&c.a.createElement(b.a,{className:"mt-4"},c.a.createElement(v.a,null,c.a.createElement(P.a,{style:{display:"".concat(M?"block":"none")},variant:"danger"},M),S?c.a.createElement(O.a,{onClick:function(){return L(!T)},variant:"dark"},T?"Hotovo":"Upravit"):c.a.createElement(O.a,{disabled:!0,onClick:function(){return L(!T)},variant:"dark"},T?"Hotovo":"Upravit")))))},te=function(e){var t=e.shopData,a=e.isOwner,n=e.userId;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ee,{shopData:t,isOwner:a}),c.a.createElement(K,{shopData:t,isOwner:a,userId:n}))},ae=function(e){var t=e.userId,a=e.isOwner,r=Object(s.h)().shopUrl,o=Object(n.useState)(!0),m=Object(l.a)(o,2),i=m[0],u=m[1],p=Object(n.useState)({}),d=Object(l.a)(p,2),h=d[0],E=d[1],g=Object(n.useState)(!0),b=Object(l.a)(g,2),v=b[0],j=b[1];return Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/shop/link/".concat(r)).then((function(e){return e.data?E(e.data):E({})})).catch((function(e){return e&&console.log(e)})).then((function(){h._id&&u(!1),j(!1)}))}),[]),v?c.a.createElement(L.a,{style:{marginLeft:"49%",marginTop:"20%"},animation:"border"}):i&&h._id?c.a.createElement(te,{shopData:h,isOwner:a,userId:t}):c.a.createElement("h5",{style:{marginTop:"20%"},className:"text-center"},"No shop found. The url https://mas-vino.herokuapp.com/",r," is still available.")},ne=a(148),ce=a.n(ne),re=a(239),oe=a(111),le=a(153),me=a(241),se=function(e){var t=e.setUserInformation,a=Object(n.useState)(""),r=Object(l.a)(a,2),o=r[0],m=r[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),u=i[0],p=i[1],d=Object(n.useState)(""),h=Object(l.a)(d,2),f=h[0],E=h[1],g=Object(n.useState)(""),j=Object(l.a)(g,2),O=j[0],y=j[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),w=S[0],C=S[1],I=Object(n.useState)(""),z=Object(l.a)(I,2),F=z[0],D=z[1],P=Object(n.useState)(""),T=Object(l.a)(P,2),L=T[0],_=T[1],R=Object(n.useState)(""),U=Object(l.a)(R,2),B=U[0],H=U[1];Object(n.useEffect)((function(){console.log("check"),""===A()&&""===M(o)&&""===M(f)&&""===Z()&&""===V()&&""===J()&&""===Y()?function(){var e=u?o+" "+u+" "+f:o+" "+f,a="".concat(F,",").concat(L.toString(),",").concat(B);t({fullName:e,email:O,phone:w,address:a})}():t("")}),[o,f,O,F,B,L,w]);var A=function(){return O&&O.match(/[a-z]+[.]?[a-z]*[@][a-z]+[.][a-z]{1,5}/gi)?"":O&&O.length>0?"invalid-input":void 0},M=function(e){return e&&e.match(/^[a-z]+$/i)?"":e&&e.length>0?"invalid-input":void 0},Y=function(){return B&&B.match(/^[a-z]+$/i)?"":B&&B.length>0?"invalid-input":void 0},V=function(){return F&&F.match(/^[a-z ]+[0-9 ]+[/]{0,1}[a-z0-9 ]*$/i)?"":F&&F.length>0?"invalid-input":void 0},Z=function(){return w&&w.match(/^[+]?[0-9]{6,14}[0-9]$/)?"":w&&w.length>0?"invalid-input":void 0},J=function(){return L&&L.match(/^[0-9]{5}$/)?"":L&&L.length>0?"invalid-input":void 0};return c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},c.a.createElement(x.a,null,c.a.createElement("br",null),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"firstName"},"First Name:"),c.a.createElement("input",{className:"form-control text-center ".concat(M(o)),type:"text",name:"firstName",value:o,onChange:function(e){return m(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"middleName"},"Middle Name (Optional):"),c.a.createElement("input",{className:"form-control text-center ".concat(M(u)),type:"text",name:"middleName",value:u,onChange:function(e){return p(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"lastName"},"Last Name:"),c.a.createElement("input",{className:"form-control text-center ".concat(M(f)),type:"text",name:"lastName",value:f,onChange:function(e){return E(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"email"},"E-mail:"),c.a.createElement("input",{className:"form-control text-center ".concat(A()),type:"text",name:"email",value:O,onChange:function(e){return y(e.target.value)}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"phone"},"Phone:"),c.a.createElement("input",{className:"form-control text-center ".concat(Z()),type:"text",name:"phone",value:w,onChange:function(e){return C(e.target.value&&e.target.value.substring(0,16))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"street"},"Street and house no.:"),c.a.createElement("input",{className:"form-control text-center ".concat(V()),type:"text",name:"street",value:F,onChange:function(e){return D(e.target.value&&e.target.value[0].toUpperCase()+e.target.value.substring(1))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"postal"},"Postal:"),c.a.createElement("input",{className:"form-control text-center ".concat(J()),type:"text",name:"postal",value:L,onChange:function(e){return _(e.target.value&&e.target.value.substring(0,5))}})),c.a.createElement(v.a,{md:6,className:"text-center mt-1"},c.a.createElement("label",{htmlFor:"city"},"City:"),c.a.createElement("input",{className:"form-control text-center ".concat(Y()),type:"text",name:"city",value:B,onChange:function(e){return H(e.target.value)}}))),c.a.createElement(b.a,{className:"justify-content-md-center"},c.a.createElement(v.a,{md:6,className:"text-center mt-3"}))))},ie=a(110),ue=function(e){var t=e.userId,a=Object(n.useRef)(null),r=Object(n.useState)(""),o=Object(l.a)(r,2),m=o[0],s=o[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),p=u[0],d=u[1],h=Object(n.useState)(""),g=Object(l.a)(h,2),j=g[0],y=g[1],N=Object(n.useState)(!1),k=Object(l.a)(N,2),S=k[0],w=k[1],C=Object(n.useState)(!1),I=Object(l.a)(C,2),z=I[0],F=I[1],D=Object(n.useState)(!1),P=Object(l.a)(D,2),T=P[0],_=P[1],R=Object(n.useState)(!1),U=Object(l.a)(R,2),B=U[0],H=U[1],A=Object(n.useState)(Object(le.a)()),M=Object(l.a)(A,2),Y=M[0],V=(M[1],Object(n.useState)({})),Z=Object(l.a)(V,2),J=Z[0],$=Z[1],W=Object(n.useState)(!1),G=Object(l.a)(W,2),K=G[0],Q=G[1],ee=function(){return a.current.scrollIntoView({behavior:"smooth",block:"start"})},te=function(e){var a,n=[],c=Object(oe.a)(e);try{var r=function(){var e=a.value;f.a.get("https://mas-vino.herokuapp.com/shop/".concat(e.shopId)).then((function(a){if(a.data&&a.data.shopName){var c=a.data,r=c.shopName,o=c.owner,l=a.data.shopItems,m=e.count,s=e.itemId,i=l.find((function(t){return t._id===e.itemId}));if(void 0===i)f.a.post("https://mas-vino.herokuapp.com/users/".concat(t,"/cart/delete-cart-item/").concat(e.shopId,"/").concat(e.itemId)).then((function(e){return console.log(e)})).catch((function(e){return e&&console.log("could not delete item",e)}));else{var u=i.itemName,p=i.price,d=i.imageLink,h=n.findIndex((function(t){return t.shopId===e.shopId}));if(h>=0){var g=n[h].itemData,b=g.findIndex((function(e){return e.itemId===s}));if(-1!==b){var v=n[h].itemData[b].count;n[h].itemData[b].count=Number(m)+Number(v)}else n[h].itemData=[].concat(Object(E.a)(g),[{itemId:s,itemName:u,price:p,imageLink:d,count:m}])}else{var j=e.shopId;n=[].concat(Object(E.a)(n),[{shopId:j,shopName:r,owner:o,itemData:[{itemId:s,itemName:u,price:p,imageLink:d,count:m}]}])}}}})).catch((function(e){if(e)return console.log(e)})).then((function(){return s(Object(E.a)(n))}))};for(c.s();!(a=c.n()).done;)r()}catch(o){c.e(o)}finally{c.f()}};Object(n.useEffect)((function(){H(!0);var e=localStorage.getItem("shoppingCart");if(t){var a=e?JSON.parse(e):[];if(0!==a.length)(function(){var e=Object(re.a)(ce.a.mark((function e(){var n,c,r,o,l,m;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(oe.a)(a),e.prev=1,n.s();case 3:if((c=n.n()).done){e.next=11;break}return r=c.value,o=r.shopId,l=r.itemId,m=r.count,console.log("importing item ",l),e.next=9,f.a.post("https://mas-vino.herokuapp.com/users/".concat(t,"/cart/add-cart-item/").concat(o,"/").concat(l),{shopId:o,itemId:l,count:m}).then((function(e){return console.log(e)})).catch((function(e){return e&&console.log(e)}));case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:localStorage.removeItem("shoppingCart"),console.log("Importing done.");case 21:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}})()();f.a.get("https://mas-vino.herokuapp.com/users/".concat(t)).then((function(e){if(e.data){var t=e.data,n=t.shoppingCart,c=t.fullName,r=t.email,o=t.phone,l=t.address;te([].concat(Object(E.a)(n),Object(E.a)(a))),y({fullName:c,email:r,phone:o,address:l})}})).catch((function(e){return e&&console.log(e)}))}else{var n=localStorage.getItem("shoppingCart");n&&te(JSON.parse(n))}H(!1)}),[p]);var ae=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}},ne=function(e,a){return e.map((function(e,n){return c.a.createElement(v.a,{"data-id":"".concat(e.itemId),md:3,xs:6,lg:2,key:"".concat(e.itemId),style:{textAlign:"center"}},c.a.createElement(me.a,{src:ae(e.imageLink)?ae(e.imageLink):"",rounded:!0,style:{height:75}}),c.a.createElement("h6",null,e.itemName),c.a.createElement("p",null,"Count: ",e.count,c.a.createElement("br",null),e.price," \u20ac"),c.a.createElement(O.a,{style:{position:"absolute",right:"20%",top:0},onClick:function(n){return function(e,a,n){if(t)f.a.post("https://mas-vino.herokuapp.com/users/".concat(t,"/cart/delete-cart-item/").concat(n,"/").concat(a)).then((function(e){return console.log(e)})).catch((function(e){return e&&console.log("could not delete item",e)})).then((function(){return d(!p)})),1===m.length&&s("");else{var c=JSON.parse(localStorage.getItem("shoppingCart")).filter((function(e){return e.itemId!==a}));localStorage.removeItem("shoppingCart"),console.log(c,m),0!==c.length?localStorage.setItem("shoppingCart",JSON.stringify(c)):s(""),d(!p)}}(0,e.itemId,a)},variant:"danger",size:"sm"},"X"))}))},ue=function(){setTimeout((function(){return ee()}),500),F(!1),_(!1),w(!0)};return Object(n.useEffect)((function(){return console.log(j)}),[j]),c.a.createElement(x.a,{style:{paddingTop:"50px"}},J&&K&&c.a.createElement(ie.a,{orderInfo:J,setPaymentPopup:Q,paymentPopup:K}),B?c.a.createElement(L.a,{style:{marginLeft:"49%",marginTop:"20%"},animation:"border"}):m&&m.sort().map((function(e){return c.a.createElement(b.a,{key:e.shopId,style:{marginBottom:"15px"}},c.a.createElement(v.a,{style:{marginBottom:"50px"},xs:12},c.a.createElement("hr",null),c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.a.createElement("div",null,c.a.createElement("h4",null,e.shopName)),c.a.createElement("div",{className:"text-right"},c.a.createElement("h5",null,"Suma: ",function(e){var t,a=0,n=Object(oe.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;a+=Number(c.price.replace(/,/g,"."))*c.count}}catch(r){n.e(r)}finally{n.f()}return a}(e.itemData).toFixed(2).toString().replace(/\./g,",")," \u20ac")))),ne(e.itemData,e.shopId))})),c.a.createElement(b.a,{className:"text-center"},c.a.createElement(v.a,null,!j&&m&&c.a.createElement("p",null,c.a.createElement(O.a,{onClick:function(){return setTimeout((function(){return ee()}),500),w(!1),_(!1),void F(!0)},variant:"dark"},"Dorucovacie udaje s registraciou"),"\xa0\xa0",c.a.createElement(O.a,{onClick:function(){return ue()},variant:"dark"},"Mam ucet a chcem sa prihlasit"),"\xa0\xa0",c.a.createElement(O.a,{onClick:function(){return setTimeout((function(){return ee()}),500),w(!1),F(!1),void _(!0)},variant:"dark"},"Dorucovacie udaje bez registracie")))),c.a.createElement(b.a,{className:"text-center"},S&&c.a.createElement(q,{shoppingCart:!0}),z&&c.a.createElement(X,{shoppingCart:!0,handleLogin:ue}),T&&c.a.createElement(se,{setUserInformation:y})),c.a.createElement(b.a,{className:"text-center"},c.a.createElement("br",null),c.a.createElement("br",null),m&&function(){var e=0;return m.map((function(t){return t.itemData.map((function(t){return e+=Number(t.price.replace(/,/g,"."))*t.count}))})),c.a.createElement(v.a,null,c.a.createElement("h3",null,"Finalna suma: ",e.toFixed(2).toString().replace(/\./g,",")," \u20ac"))}()),c.a.createElement(b.a,{className:"text-center"},c.a.createElement(v.a,null,j&&m?c.a.createElement(O.a,{ref:a,onClick:function(){return function(){var e=0;m.map((function(t){return t.itemData.map((function(t){return e+=Number(t.price.replace(/,/g,"."))*t.count}))})),console.log(m,t,e,Object(le.a)(),j);var a=e;$({orderId:Y,userInformation:j,userId:t,shops:m,total:a,status:"vytvorena"}),Q(!0),f.a.post("https://mas-vino.herokuapp.com/orders/add",{orderId:Y,userInformation:j,userId:t,shops:m,total:a,status:"vytvorena"}).then((function(e){})).catch((function(e){return e&&console.log(e)}))}()},variant:"dark"},"Prejst k platbe"):c.a.createElement(c.a.Fragment,null,!m&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",null,"Nakupny kosik je momentalne prazdny."),c.a.createElement("br",null),c.a.createElement("br",null)),c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Prejst k platbe")))),c.a.createElement("br",null),c.a.createElement("div",{ref:a}))},pe=a(50),de=a.n(pe),he=a(242),fe=function(e){var t=e.userId,a=e.isOwner,r=Object(n.useState)([]),o=Object(l.a)(r,2),m=o[0],s=o[1],i=Object(n.useState)({}),u=Object(l.a)(i,2),p=u[0],d=u[1],h=Object(n.useState)(!1),E=Object(l.a)(h,2),j=E[0],O=E[1],y=Object(n.useState)({}),N=Object(l.a)(y,2),k=N[0],S=N[1];Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/orders").then((function(e){var n=e.data,c=a?n:n.filter((function(e){return e.userId===t}));s(c)})).catch((function(e){return e&&console.log(e.data)}))}),[]);var w=function(e){var t=e.passItemData,a=0;return t.map((function(e,n){var r=e.itemName,o=e.price,l=e.count,m=e.itemId;return a+=l*Number(o.replace(/,/g,".")),c.a.createElement(c.a.Fragment,{key:m},c.a.createElement(v.a,{style:{border:"1px solid #cccccc"},md:3},"(",l,") ",c.a.createElement("strong",null,r),", ",o,"\u20ac"),!t[n+1]&&c.a.createElement(v.a,{className:"text-center",style:{border:"1px solid #cccccc",backgroundColor:"rgb(245, 245, 245)"},md:2,order:12},c.a.createElement("h6",null,"spolu: ",c.a.createElement("strong",null,a.toFixed(2).toString().replace(/\./g,",")," \u20ac"))))}))},C=function(e){var t=e.passShops;return t.map((function(e,a){var n=e.shopName,r=e.itemData,o=e.shopId;return c.a.createElement(x.a,{key:o,fluid:!0},c.a.createElement(b.a,null,c.a.createElement(v.a,{md:2},c.a.createElement("h5",null,n,":"))),c.a.createElement(b.a,null,c.a.createElement(w,{passItemData:r})),t[a+1]&&c.a.createElement("hr",null))}))},I=function(e){var t=e.passUserInformation,a=e.buyerId,n=t.fullName,r=(t.email,t.phone),o=t.address,l=t.iban;return c.a.createElement("div",{className:"text-center",key:a},c.a.createElement(b.a,null,c.a.createElement(v.a,{md:{span:2,offset:1}},c.a.createElement("strong",null,n)),c.a.createElement(v.a,{md:2},c.a.createElement("strong",null,r)),c.a.createElement(v.a,{md:3},c.a.createElement("strong",null,o)),c.a.createElement(v.a,{md:{span:3}},c.a.createElement("strong",null,null!==l&&void 0!==l?l:"IBAN NENAJDENY"))),c.a.createElement("hr",null))},z=function(){return m.map((function(e){var t,n,r=e._id,o=e.orderId,l=e.userInformation,m=e.createdAt,s=e.status,i=e.shops,u=e.isShipped,h=e.total,E=e.userId,b=l.email,v="vytvorena"===s?"orange":"zaplatena"===s?"green":"odmietnuta"===s?"red":"black";return c.a.createElement("tbody",{key:o},c.a.createElement("tr",{onClick:function(){return function(e){var t,a={},n=null!==(t=k[e])&&void 0!==t&&t;a[e]=!n,S(Object(g.a)(Object(g.a)({},k),a))}(r)}},c.a.createElement("td",null,o),c.a.createElement("td",null,b),c.a.createElement("td",null,de()(m).format("DD MMM YYYY, HH:mm:ss")),c.a.createElement("td",null,h.toFixed(2).toString().replace(/\./g,",")," \u20ac"),c.a.createElement("td",{style:{color:v}},(null!==(t=p[r])&&void 0!==t?t:u)?c.a.createElement("em",{style:{color:"blue",float:"left"}},"odoslana"):s,"zaplatena"===s&&a&&c.a.createElement("input",{style:{float:"right",cursor:"pointer",paddingBottom:"-50px"},type:"checkbox",name:"checkShipping",checked:null!==(n=p[r])&&void 0!==n?n:u,onChange:function(e){return function(e,t){var a;e.stopPropagation();var n=e.target.checked,c={},r={};c[t]=n,d(Object(g.a)(Object(g.a)({},p),c));var o=null!==(a=k[t])&&void 0!==a&&a;r[t]=o,S(Object(g.a)(Object(g.a)({},k),r)),f.a.put("https://mas-vino.herokuapp.com/orders/".concat(t,"/update-shipped/"),{isShipped:n}).then((function(e){return console.log(e.data)})).catch((function(e){return e&&console.log(e)})).then((function(){return O(!j)}))}(e,r)}}))),k[r]&&c.a.createElement("tr",{style:{backgroundColor:"zaplatena"===s?"#f4fff4":"odmietnuta"===s?"#ffecec":"rgb(250, 250, 250)"}},c.a.createElement("td",{colSpan:"5"},c.a.createElement(I,{passUserInformation:l,buyerId:E}),c.a.createElement(C,{passShops:i}))))}))};return c.a.createElement(he.a,{striped:!0,bordered:!0,hover:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"ID"),c.a.createElement("th",null,"Email"),c.a.createElement("th",null,"Datum"),c.a.createElement("th",null,"Total"),c.a.createElement("th",null,"Stav"))),c.a.createElement(z,null))},Ee=function(e){var t=e.userId,a=new URLSearchParams(Object(s.g)().search),r=a.get("Reference"),o=a.get("ResultCode"),l=a.get("PaymentRequestId");return Object(n.useEffect)((function(){0!==r.length&&f.a.post("https://mas-vino.herokuapp.com/orders/".concat(r,"/process-payment/"),{paymentResultCode:o,paymentId:l}).then((function(e){return console.log(e.data)})).catch((function(e){return e&&console.log(e)})).then((function(){t&&f.a.get("https://mas-vino.herokuapp.com/users/".concat(t,"/cart/clear-cart")).then((function(e){return console.log(e.data)})).catch((function(e){return e&&console.log(e)})),localStorage.removeItem("shoppingCart")}))}),[]),c.a.createElement("p",{className:"text-center"},"Platba za objednavku cislo ",r," bola prijata. ",c.a.createElement("br",null),"Cislo platby ",l)},ge=function(e){e.userId;var t=new URLSearchParams(Object(s.g)().search),a=t.get("Reference"),n=t.get("PaymentRequestId");return c.a.createElement("p",{className:"text-center",style:{color:"red"}},"Platba za objednavku cislo ",a," nepresla. ",c.a.createElement("br",null),"Referencne cislo platby ",n)},be=function(e){var t=e.userData,a=e.shopData,r=Object(n.useState)(!1),o=Object(l.a)(r,2),m=(o[0],o[1]),s=t.userId,i=function(){return a.map((function(e,t){var a=e.shopItems,n=e.url,r=e.shopId;return c.a.createElement(D,{key:"".concat(r,"-").concat(t),shopItems:a,url:n,shopId:r,userId:s,setShouldReload:!1,shouldReload:!1,setShowAddedPopup:m,isOwner:!1})}))};return c.a.createElement(x.a,null,c.a.createElement(b.a,{className:"text-center"},c.a.createElement(i,null)))},ve=function(e){var t=e.userData,a=Object(n.useState)({}),r=Object(l.a)(a,2),o=r[0],m=r[1],s=Object(n.useState)(!0),i=Object(l.a)(s,2),u=i[0],p=i[1];return Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/shop/").then((function(e){return m(e.data?e.data:{})})).catch((function(e){if(e)return console.log("Fetch error: ".concat(e))})).then((function(){return p(!1)}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),u?c.a.createElement(L.a,{style:{marginLeft:"49%",marginTop:"20%"},animation:"border"}):c.a.createElement(be,{userData:t,shopData:o}))},je=a(89),Oe=a.n(je),ye=(a(100),function(e){var t=e.eventPopup,a=e.setEventPopup,r=e.refresh,o=e.setRefresh,m=Object(n.useState)(new Date),s=Object(l.a)(m,2),i=s[0],u=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),h=d[0],E=d[1],g=Object(n.useState)(""),j=Object(l.a)(g,2),y=j[0],x=j[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),z=S[0],F=S[1],D=Object(n.useState)(""),P=Object(l.a)(D,2),T=P[0],L=P[1],_=Object(n.useState)(""),R=Object(l.a)(_,2),U=R[0],B=R[1],H=Object(n.useState)(""),A=Object(l.a)(H,2),M=A[0],Y=A[1],V=Object(n.useState)(""),Z=Object(l.a)(V,2),J=Z[0],$=Z[1];Object(n.useEffect)((function(){if(h){var e=h.replace(/\s/g,"-").toLowerCase();x(e)}}),[h]);Object(n.useEffect)((function(){$(de()(i).format("DD.MM.YYYY, HH:mm"))}),[i]);return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"name"},"Nazov udalosti:"),c.a.createElement("input",{name:"name",className:"form-control text-center",value:h,onChange:function(e){return E(e.target.value)},placeholder:"povinne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"where"},"Miesto udalosti:"),c.a.createElement("input",{name:"where",className:"form-control text-center",value:M,onChange:function(e){return Y(e.target.value)},placeholder:"volitelne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"link"},"Externy link udalosti:"),c.a.createElement("input",{name:"link",className:"form-control text-center",value:z,onChange:function(e){return F(e.target.value)},placeholder:"volitelne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},"Cas a datum udalosti (povinne): ",c.a.createElement("strong",null,J),c.a.createElement("br",null),c.a.createElement("br",null),"Vyber: ",c.a.createElement(Oe.a,{showTimeSelect:!0,selected:i,onChange:function(e){return u(e)}}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:T,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"200px"},onChange:function(e){return L(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},h&&c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(y)}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(y),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&B("".concat(y,"-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Pridat obrazok udalosti. ",c.a.createElement("br",null)," (povinne)",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))),c.a.createElement("br",null),h&&T&&U&&J?c.a.createElement(O.a,{variant:"dark",onClick:function(){f.a.post("https://mas-vino.herokuapp.com/events/add",{name:h,link:z,description:T,imageLink:U,where:M,when:J}).then((function(e){o(!r),a(!1)})).catch((function(e){return e&&e.data}))}},"Pridat"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Pridat"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))}),xe=function(e){var t=e.eventPopup,a=e.setEventPopup,r=e.refresh,o=e.setRefresh,m=e.eventData,s=Object(n.useState)(de()(m.when,"DD.MM.YYYY, HH:mm").valueOf()),i=Object(l.a)(s,2),u=i[0],p=i[1],d=Object(n.useState)(m.name),h=Object(l.a)(d,2),E=h[0],g=h[1],j=Object(n.useState)(m.idFromName),y=Object(l.a)(j,2),x=y[0],k=y[1],S=Object(n.useState)(m.link),z=Object(l.a)(S,2),F=z[0],D=z[1],P=Object(n.useState)(m.description),T=Object(l.a)(P,2),L=T[0],_=T[1],R=Object(n.useState)(m.imageLink),U=Object(l.a)(R,2),B=U[0],H=U[1],A=Object(n.useState)(m.where),M=Object(l.a)(A,2),Y=M[0],V=M[1],Z=Object(n.useState)(m.when),J=Object(l.a)(Z,2),$=J[0],W=J[1],X=function(e){try{return console.log(e),"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){if(E){var e=E.replace(/\s/g,"-").toLowerCase();k(e)}}),[E]);Object(n.useEffect)((function(){W(de()(u).format("DD.MM.YYYY, HH:mm"))}),[u]);return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"name"},"Nazov udalosti:"),c.a.createElement("input",{name:"name",className:"form-control text-center",value:E,onChange:function(e){return g(e.target.value)},placeholder:"povinne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"where"},"Miesto udalosti:"),c.a.createElement("input",{name:"where",className:"form-control text-center",value:Y,onChange:function(e){return V(e.target.value)},placeholder:"volitelne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"link"},"Externy link udalosti:"),c.a.createElement("input",{name:"link",className:"form-control text-center",value:F,onChange:function(e){return D(e.target.value)},placeholder:"volitelne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},"Cas a datum udalosti (povinne): ",c.a.createElement("strong",null,$),c.a.createElement("br",null),c.a.createElement("br",null),"Vyber: ",c.a.createElement(Oe.a,{showTimeSelect:!0,selected:u,onChange:function(e){return p(e)}}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:L,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"200px"},onChange:function(e){return _(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},E&&B?c.a.createElement(b.a,{className:"justify-content-center text-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("img",{style:{height:"110px",width:"160px"},src:X(B)?X(B):B}),c.a.createElement(O.a,{onClick:function(){return H("")},variant:"dark",size:"sm"},"Vymazat obrazok"))):c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(x)}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(x),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&H("".concat(x,"-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Pridat obrazok udalosti. ",c.a.createElement("br",null)," (povinne)",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))),c.a.createElement("br",null),E&&L&&B&&$?c.a.createElement(O.a,{variant:"dark",onClick:function(){f.a.post("https://mas-vino.herokuapp.com/events/update-event/".concat(m._id),{name:E,link:F,description:L,imageLink:B,where:Y,when:$}).then((function(e){console.log(e.data),o(!r),a("")})).catch((function(e){return e&&e.data}))}},"Pridat"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Pridat"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))},Ne=function(e){var t=e.isOwner,a=Object(n.useState)([]),r=Object(l.a)(a,2),o=r[0],m=r[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),u=i[0],p=i[1],d=Object(n.useState)(!1),h=Object(l.a)(d,2),E=h[0],y=h[1],N=Object(n.useState)(""),S=Object(l.a)(N,2),w=S[0],C=S[1],I=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/events/").then((function(e){var t=e.data,a=t.sort((function(e,t){return e.when<t.when?1:-1}));m(a)})).catch((function(e){return e&&console.log(e)}))}),[E]);var z=function(){return o.map((function(e){var a=e._id,n=e.name,r=e.link,o=e.description,l=e.imageLink,m=e.when,s=e.where;return c.a.createElement(v.a,{key:a,style:{maxWidth:"800px"},className:"mt-4",md:12,lg:6},c.a.createElement(j.a,{className:"h-100",id:a},t&&c.a.createElement(O.a,{onClick:function(){return e=a,void f.a.delete("https://mas-vino.herokuapp.com/events/".concat(e,"/")).then((function(){return y(!E)})).catch((function(e){return e&&console.log("Error ".concat(e))}));var e},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+5"},variant:"outline-danger"},c.a.createElement(k.b,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),t&&c.a.createElement(O.a,{onClick:function(e){return function(e){var t={};t[e.currentTarget.parentNode.id]=!0,C(Object(g.a)(Object(g.a)({},w),t))}(e)},style:{width:"40px",height:"40px",marginBottom:"-40px",marginLeft:"40px",zIndex:"+5"},variant:"outline-warning"},c.a.createElement(k.c,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),w&&c.a.createElement(xe,{refresh:E,setRefresh:y,setEventPopup:C,eventPopup:w[a],eventData:e}),c.a.createElement(j.a.Img,{variant:"top",style:{height:"350px"},src:I(l)?I(l):l}),c.a.createElement(j.a.Body,null,c.a.createElement(j.a.Title,null,n,c.a.createElement(O.a,{onClick:function(){return e=r,void window.open(e,"_blank").focus();var e},size:"sm",variant:"dark",style:{float:"right",marginTop:"-5px"}},"Viac info")),c.a.createElement(j.a.Text,null,o)),(m||s)&&c.a.createElement(j.a.Footer,null,c.a.createElement("small",{className:"text-muted"},c.a.createElement(k.a,{style:{fontSize:"130%"}})," ",m,c.a.createElement("br",null)," ",c.a.createElement(k.d,{style:{fontSize:"130%"}})," ",s))))}))};return c.a.createElement(x.a,{className:"mb-4"},u&&c.a.createElement(ye,{refresh:E,setRefresh:y,setEventPopup:p,eventPopup:u}),t&&c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(O.a,{className:"mt-4",variant:"dark",onClick:function(){return p(!0)}},"Pridat Event")),c.a.createElement(b.a,{className:"justify-content-center justify-content-md-start"},c.a.createElement(z,null)))},ke=function(e){var t=e.servicePopup,a=e.setServicePopup,r=e.refresh,o=e.setRefresh,m=Object(n.useState)(""),s=Object(l.a)(m,2),i=s[0],u=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),h=d[0],E=d[1],g=Object(n.useState)(""),j=Object(l.a)(g,2),y=j[0],x=j[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),z=S[0],F=S[1],D=Object(n.useState)(""),P=Object(l.a)(D,2),T=P[0],L=P[1];Object(n.useEffect)((function(){if(i){var e=i.replace(/\s/g,"-").toLowerCase();E(e)}}),[i]);return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"name"},"Nazov sluzby:"),c.a.createElement("input",{name:"name",className:"form-control text-center",value:i,onChange:function(e){return u(e.target.value)},placeholder:"povinne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"link"},"Externy link sluzby:"),c.a.createElement("input",{name:"link",className:"form-control text-center",value:y,onChange:function(e){return x(e.target.value)},placeholder:"volitelne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:z,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"200px"},onChange:function(e){return F(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},i&&c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(h)}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(h),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&L("".concat(h,"-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Pridat obrazok sluzby. ",c.a.createElement("br",null)," (povinne)",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))),c.a.createElement("br",null),i&&z&&T?c.a.createElement(O.a,{variant:"dark",onClick:function(){f.a.post("https://mas-vino.herokuapp.com/services/add",{name:i,link:y,description:z,imageLink:T}).then((function(e){o(!r),a(!1)})).catch((function(e){return e&&e.data}))}},"Pridat"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Pridat"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))},Se=function(e){var t=e.servicePopup,a=e.setServicePopup,r=e.refresh,o=e.setRefresh,m=e.serviceData,s=Object(n.useState)(m.name),i=Object(l.a)(s,2),u=i[0],p=i[1],d=Object(n.useState)(m.idFromName),h=Object(l.a)(d,2),E=h[0],g=h[1],j=Object(n.useState)(m.link),y=Object(l.a)(j,2),x=y[0],k=y[1],S=Object(n.useState)(m.description),z=Object(l.a)(S,2),F=z[0],D=z[1],P=Object(n.useState)(m.imageLink),T=Object(l.a)(P,2),L=T[0],_=T[1],R=function(e){try{return console.log(e),"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){if(u){var e=u.replace(/\s/g,"-").toLowerCase();g(e)}}),[u]);return c.a.createElement(I.a,{show:t,onHide:function(){return a(!1)}},c.a.createElement(I.a.Body,{className:"text-center"},c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"name"},"Nazov sluzby:"),c.a.createElement("input",{name:"name",className:"form-control text-center",value:u,onChange:function(e){return p(e.target.value)},placeholder:"povinne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"link"},"Externy link sluzby:"),c.a.createElement("input",{name:"link",className:"form-control text-center",value:x,onChange:function(e){return k(e.target.value)},placeholder:"volitelne"}))),c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(v.a,{className:"form-group text-center mt-1"},c.a.createElement("label",{htmlFor:"description"},"Description:"),c.a.createElement("textarea",{value:F,className:"form-control text-center",name:"description",type:"text",style:{resize:"none",minHeight:"200px"},onChange:function(e){return D(e.target.value)},placeholder:"povinne"}))),c.a.createElement("br",null),c.a.createElement(N.SlideDown,{className:"my-dropdown-slidedown"},u&&L?c.a.createElement(b.a,{className:"justify-content-center text-center"},c.a.createElement(v.a,{className:"form-group"},c.a.createElement("img",{style:{height:"110px",width:"160px"},src:R(L)?R(L):L}),c.a.createElement(O.a,{onClick:function(){return _("")},variant:"dark",size:"sm"},"Vymazat obrazok"))):c.a.createElement(b.a,null,c.a.createElement(v.a,null,c.a.createElement(w.a,{maxFiles:1,multiple:!1,canCancel:!1,getUploadParams:function(e){e.meta;return{url:"https://mas-vino.herokuapp.com/fileUpload/".concat(E)}},onChangeStatus:function(e,t){var a=e.meta;e.file;"removed"===t&&function(e){f.a.get("https://mas-vino.herokuapp.com/deleteFile/".concat(E),{params:e}).then((function(){})).catch((function(e){return e&&console.log(e)}))}(a),"done"===t&&_("".concat(E,"-").concat(a.name))},accept:"image/*",inputContent:function(){return c.a.createElement("p",{className:"text-center",key:"label",style:{marginTop:"15px",color:"#333333"}},"Pridat obrazok sluzby. ",c.a.createElement("br",null)," (povinne)",c.a.createElement("br",null),c.a.createElement(C.a,null))},classNames:{dropzone:"dropzoning"}})))),c.a.createElement("br",null),u&&F&&L?c.a.createElement(O.a,{variant:"dark",onClick:function(){return console.log(m),void f.a.post("https://mas-vino.herokuapp.com/services/update-service/".concat(m._id),{name:u,link:x,description:F,imageLink:L}).then((function(e){console.log(e.data),o(!r),a("")})).catch((function(e){return e&&e.data}))}},"Pridat"):c.a.createElement(O.a,{disabled:!0,variant:"dark"},"Pridat"),"\xa0\xa0\xa0\xa0",c.a.createElement(O.a,{variant:"dark",onClick:function(){return a(!1)}},"Zrusit")))},we=function(e){var t=e.isOwner,a=Object(n.useState)([]),r=Object(l.a)(a,2),o=r[0],m=r[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),u=i[0],p=i[1],d=Object(n.useState)(!1),h=Object(l.a)(d,2),E=h[0],y=h[1],N=Object(n.useState)(""),S=Object(l.a)(N,2),w=S[0],C=S[1],I=function(e){try{return"https://vineckabucket.s3.eu-central-1.amazonaws.com/".concat(e.replace(/_/g,"-"))}catch(t){return null}};Object(n.useEffect)((function(){f.a.get("https://mas-vino.herokuapp.com/services/").then((function(e){var t=e.data;m(t)})).catch((function(e){return e&&console.log(e)}))}),[E]);var z=function(){return o.map((function(e){var a=e._id,n=e.name,r=e.link,o=e.description,l=e.imageLink,m=e.when,s=e.where;return c.a.createElement(v.a,{key:a,style:{maxWidth:"800px"},className:"mt-4",md:12,lg:6},c.a.createElement(j.a,{bg:"dark",text:"white",className:"h-100",id:a},t&&c.a.createElement(O.a,{onClick:function(){return e=a,void f.a.delete("https://mas-vino.herokuapp.com/services/".concat(e,"/")).then((function(){return y(!E)})).catch((function(e){return e&&console.log("Error ".concat(e))}));var e},style:{width:"40px",height:"40px",marginBottom:"-40px",zIndex:"+5"},variant:"outline-danger"},c.a.createElement(k.b,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),t&&c.a.createElement(O.a,{onClick:function(e){return function(e){var t={};t[e.currentTarget.parentNode.id]=!0,C(Object(g.a)(Object(g.a)({},w),t))}(e)},style:{width:"40px",height:"40px",marginBottom:"-40px",marginLeft:"40px",zIndex:"+5"},variant:"outline-warning"},c.a.createElement(k.c,{style:{fontSize:"150%",margin:"0 0 15px -5px"}})),w&&c.a.createElement(Se,{refresh:E,setRefresh:y,setServicePopup:C,servicePopup:w[a],serviceData:e}),c.a.createElement(j.a.Img,{variant:"top",style:{height:"350px"},src:I(l)?I(l):l}),c.a.createElement(j.a.Body,null,c.a.createElement(j.a.Title,null,n,c.a.createElement(O.a,{onClick:function(){return e=r,void window.open(e,"_blank").focus();var e},size:"sm",variant:"outline-light",style:{float:"right",marginTop:"-5px"}},"Viac info")),c.a.createElement(j.a.Text,null,o)),(m||s)&&c.a.createElement(j.a.Footer,null,c.a.createElement("small",{className:"text-muted"},c.a.createElement(k.a,{style:{fontSize:"130%"}})," ",m,c.a.createElement("br",null)," ",c.a.createElement(k.d,{style:{fontSize:"130%"}})," ",s))))}))};return c.a.createElement(x.a,{className:"mb-4"},u&&c.a.createElement(ke,{refresh:E,setRefresh:y,setServicePopup:p,servicePopup:u}),t&&c.a.createElement(b.a,{className:"justify-content-center"},c.a.createElement(O.a,{className:"mt-4",variant:"dark",onClick:function(){return p(!0)}},"Pridat Sluzbu")),c.a.createElement(b.a,{className:"justify-content-center justify-content-md-start"},c.a.createElement(z,null)))},Ce=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)({}),i=Object(l.a)(o,2),u=i[0],p=i[1],h=Object(n.useState)(!1),E=Object(l.a)(h,2),g=E[0],b=E[1];Object(n.useEffect)((function(){b(!0),f.a.get("https://mas-vino.herokuapp.com/get-user-data",{withCredentials:!0}).then((function(e){if(e.data){var t=e.data,a=t._id,n=t.userName,c=t.fullName,o=t.email,l=t.shopId,m=t.isOwner;p({_id:a,userName:n,fullName:c,email:o,shopId:l,isOwner:m}),r(!!n)}else p({})})).catch((function(e){return e&&console.log("Load Error "+e)})).then((function(){return b(!1)}))}),[]);return c.a.createElement(m.a,null,c.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossOrigin:"anonymous"}),c.a.createElement("div",null,c.a.createElement(d,{userName:u.fullName,isLoggedIn:a,handleLogOut:function(){f.a.get("https://mas-vino.herokuapp.com/logout",{withCredentials:!0}).then((function(){p({}),r(!1)})).catch((function(e){return console.log("Error ".concat(e))})).then((function(){return window.location.reload()}))}}),g?c.a.createElement(L.a,{style:{marginLeft:"49%",marginTop:"20%"},animation:"border"}):c.a.createElement("div",{style:{marginTop:"56px"}},c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/"},c.a.createElement(Y,{userId:u._id,isOwner:u.isOwner})),c.a.createElement(s.a,{exact:!0,path:"/vinarne"},c.a.createElement(W,{userData:u})),c.a.createElement(s.a,{exact:!0,path:"/vinka"},c.a.createElement(ve,{userData:u})),c.a.createElement(s.a,{exact:!0,path:"/login-page"},a?c.a.createElement(Y,{userId:u._id,isOwner:u.isOwner}):c.a.createElement(q,null)),c.a.createElement(s.a,{exact:!0,path:"/cart-page"},c.a.createElement(ue,{userId:u._id})),c.a.createElement(s.a,{exact:!0,path:"/success-payment"},c.a.createElement(Ee,{userId:u._id})),c.a.createElement(s.a,{exact:!0,path:"/failed-payment"},c.a.createElement(ge,{userId:u._id})),c.a.createElement(s.a,{exact:!0,path:"/cancel-payment"},c.a.createElement(ge,{userId:u._id})),c.a.createElement(s.a,{exact:!0,path:"/objednavky"},c.a.createElement(fe,{userId:u._id,isOwner:u.isOwner})),c.a.createElement(s.a,{exact:!0,path:"/akcie"},c.a.createElement(Ne,{isOwner:u.isOwner})),c.a.createElement(s.a,{exact:!0,path:"/sluzby"},c.a.createElement(we,{isOwner:u.isOwner})),c.a.createElement(s.a,{exact:!0,path:"/:shopUrl"},c.a.createElement(ae,{userId:u._id,isOwner:u.isOwner})),c.a.createElement(s.a,{exact:!0,path:"/shop/payment"},c.a.createElement(ie.a,null))))))};o.a.render(c.a.createElement(Ce,null),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.9c0afcbd.chunk.js.map